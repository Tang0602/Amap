# ç¦»çº¿åœ°å›¾æŠ€æœ¯æ–¹æ¡ˆé€‰å‹æ–‡æ¡£

## é¡¹ç›®èƒŒæ™¯

### ç›®æ ‡éœ€æ±‚

- ğŸ¯ **çº¯ç¦»çº¿è¿è¡Œ**ï¼šæ— éœ€ä»»ä½•ç½‘ç»œè¿æ¥
- ğŸ¯ **ä»¿çœŸé«˜å¾·åœ°å›¾**ï¼šUIå’Œäº¤äº’ä½“éªŒæ¥è¿‘é«˜å¾·
- ğŸ¯ **AIæµ‹è¯•å‹å¥½**ï¼šæ”¯æŒè‡ªåŠ¨åŒ–æµ‹è¯•å’Œæ¨¡æ‹Ÿå™¨è¿è¡Œ
- ğŸ¯ **æ•°æ®å¯æ§**ï¼šä½¿ç”¨é¢„è®¾æ•°æ®ï¼Œä¾¿äºæµ‹è¯•éªŒè¯

---

## æ–¹æ¡ˆé€‰å‹

### æœ€ç»ˆé€‰æ‹©ï¼šMapsforge å…¨å®¶æ¡¶

ç»è¿‡å¯¹ MapLibre Nativeã€Mapsforgeã€osmdroid ç­‰æ–¹æ¡ˆçš„è¯¦ç»†è¯„ä¼°ï¼Œé€‰æ‹© **Mapsforge å…¨å®¶æ¡¶** ä½œä¸ºæœ€ç»ˆæ–¹æ¡ˆã€‚

### æ–¹æ¡ˆå¯¹æ¯”æ‘˜è¦

| ç»´åº¦ | MapLibre Native | **Mapsforgeï¼ˆé€‰ä¸­ï¼‰** | osmdroid |
|------|-----------------|---------------------|----------|
| ç¦»çº¿æ”¯æŒ | âš ï¸ éœ€è¦è‡ªå®šä¹‰å®ç° | âœ… åŸç”Ÿè®¾è®¡ | âœ… æ”¯æŒ |
| å®ç°è¯­è¨€ | C++ (Native) | **Java (çº¯JVM)** | Java |
| æ¶æ„ä¾èµ– | éœ€è¦.soæ–‡ä»¶ | **æ— æ¶æ„ä¾èµ–** | æ— æ¶æ„ä¾èµ– |
| æ¨¡æ‹Ÿå™¨å…¼å®¹ | éœ€è¦GPUåŠ é€Ÿ | **ä»»æ„æ¨¡æ‹Ÿå™¨** | ä»»æ„æ¨¡æ‹Ÿå™¨ |
| æ•°æ®ä½“ç§¯ | è¾ƒå¤§ | **æœ€å°** | ä¸­ç­‰ |
| è·¯ç”±é›†æˆ | éœ€è‡ªè¡Œé›†æˆ | **GraphHopperåŸç”Ÿæ”¯æŒ** | éœ€è‡ªè¡Œé›†æˆ |
| POIæœç´¢ | éœ€è‡ªè¡Œå®ç° | **å†…ç½®æ”¯æŒ** | æ—  |

---

## æŠ€æœ¯æ¶æ„

### æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ä»¿çœŸé«˜å¾·åœ°å›¾ App                          â”‚
â”‚                    (Jetpack Compose + MVVM)                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   UI å±‚     â”‚  â”‚   ä¸šåŠ¡å±‚    â”‚  â”‚       æ•°æ®å±‚            â”‚ â”‚
â”‚  â”‚  (Compose)  â”‚  â”‚ (ViewModel) â”‚  â”‚   (Repository/Service)  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚         â”‚                â”‚                     â”‚               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    Mapsforge å…¨å®¶æ¡¶                      â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚  â”‚   æ¸²æŸ“å±‚      â”‚ â”‚    è·¯ç”±å±‚     â”‚ â”‚    æœç´¢å±‚     â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  Mapsforge    â”‚ â”‚  GraphHopper  â”‚ â”‚ Mapsforge POI â”‚ â”‚   â”‚
â”‚  â”‚  â”‚   æ¸²æŸ“å¼•æ“    â”‚ â”‚   è·¯ç”±å¼•æ“    â”‚ â”‚  + SQLite FTS â”‚ â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â”‚          â”‚                 â”‚                 â”‚         â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚  â”‚                    æ•°æ®å±‚                          â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  wuhan.map  â”‚  wuhan-gh/  â”‚  wuhan.poi  â”‚  poi.db â”‚ â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ç»„ä»¶è¯´æ˜

#### 1. æ¸²æŸ“å±‚ï¼šMapsforge

- **åŠŸèƒ½**ï¼šç¦»çº¿çŸ¢é‡åœ°å›¾æ¸²æŸ“
- **æ•°æ®æ ¼å¼**ï¼š`.map` æ–‡ä»¶
- **ç‰¹ç‚¹**ï¼š
  - çº¯ Java å®ç°ï¼Œæ—  Native ä¾èµ–
  - æ”¯æŒè‡ªå®šä¹‰æ¸²æŸ“ä¸»é¢˜ï¼ˆXMLæ ¼å¼ï¼‰
  - æ”¯æŒç¼©æ”¾ã€å¹³ç§»ã€æ—‹è½¬ç­‰åœ°å›¾æ“ä½œ
  - æ”¯æŒæ ‡è®°ç‚¹ï¼ˆMarkerï¼‰ã€è·¯çº¿ï¼ˆPolylineï¼‰ç»‘åˆ¶

#### 2. è·¯ç”±å±‚ï¼šGraphHopper

- **åŠŸèƒ½**ï¼šç¦»çº¿è·¯å¾„è§„åˆ’
- **æ•°æ®æ ¼å¼**ï¼šç›®å½•ç»“æ„ï¼ˆnodes, edges, geometryç­‰ï¼‰
- **ç‰¹ç‚¹**ï¼š
  - çº¯ Java å®ç°
  - æ”¯æŒå¤šç§äº¤é€šæ–¹å¼ï¼ˆé©¾è½¦ã€éª‘è¡Œã€æ­¥è¡Œï¼‰
  - æ”¯æŒé€”ç»ç‚¹è®¾ç½®
  - è¿”å›è¯¦ç»†å¯¼èˆªæŒ‡ä»¤

#### 3. æœç´¢å±‚ï¼šMapsforge POI + SQLite FTS

- **åŠŸèƒ½**ï¼šç¦»çº¿ POI æœç´¢ã€åœ°å€æŸ¥è¯¢
- **æ•°æ®æ ¼å¼**ï¼š`.poi` æ–‡ä»¶ + `.db` SQLiteæ•°æ®åº“
- **ç‰¹ç‚¹**ï¼š
  - Mapsforge POI æä¾›åŸºç¡€æœç´¢
  - SQLite FTS5 æä¾›å…¨æ–‡æœç´¢å¢å¼º
  - æ”¯æŒæ¨¡ç³ŠåŒ¹é…ã€æ‹¼éŸ³æœç´¢ï¼ˆå¯æ‰©å±•ï¼‰

---

## æ•°æ®è§„æ ¼

### æ•°æ®æ–‡ä»¶æ¸…å•

| æ–‡ä»¶ | æ ¼å¼ | ç”¨é€” | é¢„ä¼°ä½“ç§¯ï¼ˆæ­¦æ±‰å¸‚ï¼‰ |
|------|------|------|-------------------|
| `wuhan.map` | Mapsforge | åœ°å›¾æ¸²æŸ“ | ~30-50 MB |
| `wuhan-gh/` | GraphHopperç›®å½• | è·¯ç”±è§„åˆ’ | ~50-80 MB |
| `wuhan.poi` | Mapsforge POI | POIæœç´¢ | ~10-15 MB |
| `wuhan_poi.db` | SQLite + FTS5 | å¢å¼ºæœç´¢ | ~5-10 MB |
| `theme.xml` | XML | è‡ªå®šä¹‰ä¸»é¢˜ | ~50 KB |
| **æ€»è®¡** | | | **~100-160 MB** |

### æ•°æ®æ¥æº

æ‰€æœ‰æ•°æ®å‡æ¥æºäº **OpenStreetMap (OSM)**ï¼Œå¼€æºå…è´¹ï¼Œå¯è‡ªç”±ä½¿ç”¨ã€‚

### æ•°æ®å‡†å¤‡å·¥å…·é“¾

> âš ï¸ **æ³¨æ„**ï¼šæ•°æ®å‡†å¤‡éœ€è¦åœ¨å¼€å‘æœºï¼ˆPC/Mac/Linuxï¼‰ä¸Šå®Œæˆï¼Œä¸èƒ½åœ¨ Android è®¾å¤‡ä¸Šè¿›è¡Œã€‚

#### å‰ç½®ä¾èµ–

| å·¥å…· | ç”¨é€” | å®‰è£…å‘½ä»¤ |
|------|------|---------|
| osmium-tool | OSM æ•°æ®è£å‰ª | `brew install osmium-tool` |
| OpenJDK 17 | è¿è¡Œ osmosis/GraphHopper | `brew install openjdk@17` |
| Python + osmium | POI æå–è„šæœ¬ | `pip install osmium` |
| Docker (å¯é€‰) | è¿è¡Œ GraphHopper | - |

#### æ•°æ®å‡†å¤‡æµç¨‹

```
china-latest.osm.pbf (1GB)
         â”‚
         â–¼ osmium extract --bbox
    wuhan.osm.pbf (~50MB)
         â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â–¼                  â–¼                  â–¼
    osmosis +           GraphHopper        Python +
    mapsforge-writer                       extract_poi.py
         â”‚                  â”‚                  â”‚
         â–¼                  â–¼                  â–¼
    wuhan.map          wuhan-gh/          wuhan_poi.db
    wuhan.poi          (è·¯ç”±æ•°æ®)          (FTS5æœç´¢)
```

#### è„šæœ¬æ–‡ä»¶

æ•°æ®å‡†å¤‡è„šæœ¬ä½äº `scripts/` ç›®å½•ï¼š

| æ–‡ä»¶ | ç”¨é€” |
|------|------|
| `scripts/prepare_map_data.sh` | å®Œæ•´æ•°æ®å‡†å¤‡æµç¨‹ï¼ˆä¸‹è½½ã€è£å‰ªã€ç”Ÿæˆï¼‰ |
| `scripts/extract_poi.py` | ä» OSM æå– POI åˆ° SQLite FTS5 |

**ä½¿ç”¨æ–¹æ³•**ï¼š

```bash
# 1. è¿è¡Œæ•°æ®å‡†å¤‡è„šæœ¬
cd scripts
./prepare_map_data.sh

# 2. å¤åˆ¶ç”Ÿæˆçš„æ–‡ä»¶åˆ° assets
cp map_data/wuhan.map ../app/src/main/assets/map/
cp map_data/wuhan.poi ../app/src/main/assets/map/
cp map_data/wuhan_poi.db ../app/src/main/assets/map/
cp -r map_data/wuhan-gh ../app/src/main/assets/map/
```

---

## ä¾èµ–é…ç½®

### æ ¸å¿ƒä¾èµ–

| åº“ | ç‰ˆæœ¬ | ç”¨é€” |
|----|------|------|
| **Mapsforge** | 0.21.0 | ç¦»çº¿åœ°å›¾æ¸²æŸ“ |
| **GraphHopper** | 8.0 | ç¦»çº¿è·¯ç”±è§„åˆ’ |
| **Jetpack Compose** | BOM 2024.02.00 | UI æ¡†æ¶ |
| **Lifecycle ViewModel** | 2.7.0 | MVVM æ¶æ„ |
| **Navigation Compose** | 2.7.7 | é¡µé¢å¯¼èˆª |
| **Coroutines** | 1.7.3 | å¼‚æ­¥å¤„ç† |

### Gradle é…ç½®è¦ç‚¹

```kotlin
// app/build.gradle.kts

android {
    compileSdk = 35
    defaultConfig {
        minSdk = 24
        multiDexEnabled = true  // GraphHopper éœ€è¦
    }
    compileOptions {
        sourceCompatibility = JavaVersion.VERSION_17
        targetCompatibility = JavaVersion.VERSION_17
    }
    // GraphHopper éœ€è¦æ’é™¤é‡å¤çš„ META-INF
    packaging {
        resources {
            excludes += "META-INF/DEPENDENCIES"
            excludes += "META-INF/LICENSE*"
            excludes += "META-INF/NOTICE*"
        }
    }
}

dependencies {
    // Mapsforge åœ°å›¾
    implementation("org.mapsforge:mapsforge-core:0.21.0")
    implementation("org.mapsforge:mapsforge-map-android:0.21.0")
    implementation("org.mapsforge:mapsforge-poi-android:0.21.0")
    
    // GraphHopper è·¯ç”±ï¼ˆæ’é™¤æœåŠ¡ç«¯ä¾èµ–ï¼‰
    implementation("com.graphhopper:graphhopper-core:8.0") {
        exclude(group = "org.eclipse.jetty")
        exclude(group = "com.fasterxml.jackson.dataformat", module = "jackson-dataformat-xml")
    }
    implementation("org.slf4j:slf4j-android:1.7.36")
    
    // Jetpack Compose + MVVM
    implementation(platform("androidx.compose:compose-bom:2024.02.00"))
    implementation("androidx.compose.material3:material3")
    implementation("androidx.lifecycle:lifecycle-viewmodel-compose:2.7.0")
    implementation("androidx.navigation:navigation-compose:2.7.7")
}
```

> ğŸ’¡ å®Œæ•´é…ç½®å‚è§ `app/build.gradle.kts`

---

## é¡¹ç›®ç»“æ„

é‡‡ç”¨ **Clean Architecture + MVVM** åˆ†å±‚æ¶æ„ï¼š

```
app/src/main/
â”œâ”€â”€ assets/                                  # èµ„æºæ–‡ä»¶
â”‚   â””â”€â”€ map/                                 # ç¦»çº¿åœ°å›¾æ•°æ®
â”‚       â”œâ”€â”€ wuhan.map                        # Mapsforge åœ°å›¾æ–‡ä»¶
â”‚       â”œâ”€â”€ wuhan.poi                        # Mapsforge POI æ–‡ä»¶
â”‚       â”œâ”€â”€ wuhan_poi.db                     # SQLite FTS æ•°æ®åº“
â”‚       â””â”€â”€ wuhan-gh/                        # GraphHopper è·¯ç”±æ•°æ®
â”‚
â”œâ”€â”€ java/com/example/amap_sim/
â”‚   â”‚
â”‚   â”œâ”€â”€ data/                                # ğŸ—„ï¸ æ•°æ®å±‚ï¼ˆData Layerï¼‰
â”‚   â”‚   â”œâ”€â”€ local/                           # æœ¬åœ°æ•°æ®æº
â”‚   â”‚   â”‚   â”œâ”€â”€ AssetsHelper.kt              # Assets æ–‡ä»¶è§£å‹åŠ©æ‰‹
â”‚   â”‚   â”‚   â”œâ”€â”€ OfflineDataManager.kt        # ç¦»çº¿æ•°æ®ç®¡ç†å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ GraphHopperManager.kt        # GraphHopper å°è£…
â”‚   â”‚   â”‚   â”œâ”€â”€ MapsforgePoiManager.kt       # Mapsforge POI å°è£…
â”‚   â”‚   â”‚   â””â”€â”€ entity/                      # æ•°æ®å®ä½“
â”‚   â”‚   â”‚       â””â”€â”€ PoiEntity.kt
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ mapper/                          # æ•°æ®æ˜ å°„å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ RouteMapper.kt               # è·¯çº¿æ•°æ®è½¬æ¢
â”‚   â”‚   â”‚   â””â”€â”€ PoiMapper.kt                 # POI æ•°æ®è½¬æ¢
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ repository/                      # Repository å®ç°
â”‚   â”‚       â”œâ”€â”€ MapRepositoryImpl.kt
â”‚   â”‚       â”œâ”€â”€ RouteRepositoryImpl.kt
â”‚   â”‚       â””â”€â”€ SearchRepositoryImpl.kt
â”‚   â”‚
â”‚   â”œâ”€â”€ domain/                              # ğŸ¯ é¢†åŸŸå±‚ï¼ˆDomain Layerï¼‰
â”‚   â”‚   â”œâ”€â”€ model/                           # é¢†åŸŸæ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ LatLng.kt
â”‚   â”‚   â”‚   â”œâ”€â”€ RouteResult.kt
â”‚   â”‚   â”‚   â”œâ”€â”€ RouteInstruction.kt
â”‚   â”‚   â”‚   â”œâ”€â”€ PoiResult.kt
â”‚   â”‚   â”‚   â””â”€â”€ MarkerData.kt
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ repository/                      # Repository æ¥å£
â”‚   â”‚       â”œâ”€â”€ MapRepository.kt
â”‚   â”‚       â”œâ”€â”€ RouteRepository.kt
â”‚   â”‚       â””â”€â”€ SearchRepository.kt
â”‚   â”‚
â”‚   â”œâ”€â”€ ui/                                  # ğŸ¨ UI å±‚ï¼ˆPresentation Layerï¼‰
â”‚   â”‚   â”œâ”€â”€ MainActivity.kt
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ components/                      # å…¨å±€å¯å¤ç”¨ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ LoadingOverlay.kt
â”‚   â”‚   â”‚   â”œâ”€â”€ ErrorSnackbar.kt
â”‚   â”‚   â”‚   â””â”€â”€ EmptyState.kt
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ navigation/                      # å¯¼èˆª
â”‚   â”‚   â”‚   â””â”€â”€ NavGraph.kt
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ screen/                          # é¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ splash/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ SplashScreen.kt
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ map/                         # åœ°å›¾é¡µ
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ MapScreen.kt
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ MapViewModel.kt
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ MapUiState.kt
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ components/              # åœ°å›¾ä¸“ç”¨ç»„ä»¶
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ MapsforgeMapView.kt
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ RouteInfoCard.kt
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ MapControls.kt
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ search/                      # æœç´¢é¡µ
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SearchScreen.kt
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SearchViewModel.kt
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SearchUiState.kt
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ components/
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ SearchBar.kt
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ PoiListItem.kt
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ navigation/                  # å¯¼èˆªé¡µ
â”‚   â”‚   â”‚       â”œâ”€â”€ NavigationScreen.kt
â”‚   â”‚   â”‚       â”œâ”€â”€ NavigationViewModel.kt
â”‚   â”‚   â”‚       â””â”€â”€ components/
â”‚   â”‚   â”‚           â””â”€â”€ TurnInstruction.kt
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ theme/                           # ä¸»é¢˜
â”‚   â”‚       â”œâ”€â”€ Color.kt
â”‚   â”‚       â”œâ”€â”€ Theme.kt
â”‚   â”‚       â””â”€â”€ Type.kt
â”‚   â”‚
â”‚   â”œâ”€â”€ common/                              # ğŸ”§ é€šç”¨æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ utils/                           # å·¥å…·ç±»
â”‚   â”‚   â”‚   â”œâ”€â”€ GeoUtils.kt                  # åœ°ç†è®¡ç®—å·¥å…·
â”‚   â”‚   â”‚   â””â”€â”€ FormatUtils.kt               # æ ¼å¼åŒ–å·¥å…·
â”‚   â”‚   â”œâ”€â”€ constants/                       # å¸¸é‡
â”‚   â”‚   â”‚   â””â”€â”€ MapConstants.kt
â”‚   â”‚   â””â”€â”€ extension/                       # Kotlin æ‰©å±•å‡½æ•°
â”‚   â”‚       â””â”€â”€ LatLngExtensions.kt
â”‚   â”‚
â”‚   â””â”€â”€ di/                                  # ğŸ’‰ ä¾èµ–æ³¨å…¥
â”‚       â”œâ”€â”€ AmapSimApplication.kt            # Application
â”‚       â””â”€â”€ AppModule.kt                     # Hilt/æ‰‹åŠ¨ DI æ¨¡å—
â”‚
â””â”€â”€ res/                                     # Android èµ„æº
    â”œâ”€â”€ drawable/
    â””â”€â”€ values/
        â”œâ”€â”€ strings.xml
        â””â”€â”€ themes.xml
```

---

## æ ¸å¿ƒæ¨¡å—è¯´æ˜

### åˆ†å±‚æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              UI Layer                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚    Screen    â”‚â—„â”€â”€â”€â”‚  ViewModel   â”‚    â”‚       components/        â”‚  â”‚
â”‚  â”‚  (Compose)   â”‚    â”‚  (StateFlow) â”‚    â”‚  (å¯å¤ç”¨ Composable)     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                        Domain Layer                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                          â–¼                                       â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚   â”‚
â”‚  â”‚  â”‚    model/   â”‚    â”‚ repository/ â”‚  â† æ¥å£å®šä¹‰                  â”‚   â”‚
â”‚  â”‚  â”‚  é¢†åŸŸæ¨¡å‹   â”‚    â”‚   æ¥å£      â”‚                             â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                           Data Layer                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                             â–¼                                    â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚   â”‚
â”‚  â”‚  â”‚   local/    â”‚â”€â”€â”€â–ºâ”‚  mapper/    â”‚â”€â”€â”€â–ºâ”‚ repository/ â”‚ â† å®ç°   â”‚   â”‚
â”‚  â”‚  â”‚ æ•°æ®æºç®¡ç†  â”‚    â”‚  æ•°æ®è½¬æ¢   â”‚    â”‚    å®ç°     â”‚          â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1. æ•°æ®å±‚ (`data/`)

| ç›®å½• | èŒè´£ |
|------|------|
| `local/` | æœ¬åœ°æ•°æ®æºå°è£…ï¼ˆGraphHopperã€Mapsforgeã€SQLiteï¼‰ |
| `mapper/` | Entity â†” Domain Model æ•°æ®è½¬æ¢ |
| `repository/` | Repository æ¥å£çš„å…·ä½“å®ç° |

**local/ å…³é”®ç±»**ï¼š

| æ–‡ä»¶ | èŒè´£ |
|------|------|
| `OfflineDataManager.kt` | æ•°æ®è§£å‹ã€ç‰ˆæœ¬æ ¡éªŒã€è·¯å¾„ç®¡ç† |
| `GraphHopperManager.kt` | GraphHopper è·¯ç”±å¼•æ“å°è£… |
| `MapsforgePoiManager.kt` | Mapsforge POI + SQLite FTS å°è£… |

### 2. é¢†åŸŸå±‚ (`domain/`)

| ç›®å½• | èŒè´£ |
|------|------|
| `model/` | çº¯ Kotlin é¢†åŸŸæ¨¡å‹ï¼ˆæ—  Android ä¾èµ–ï¼‰ |
| `repository/` | Repository æ¥å£å®šä¹‰ï¼ˆä¾èµ–å€’ç½®ï¼‰ |

**Repository æ¥å£ç¤ºä¾‹**ï¼š

```kotlin
// domain/repository/RouteRepository.kt
interface RouteRepository {
    suspend fun calculateRoute(start: LatLng, end: LatLng, profile: String): RouteResult?
    suspend fun calculateRouteWithWaypoints(points: List<LatLng>, profile: String): RouteResult?
}

// domain/repository/SearchRepository.kt
interface SearchRepository {
    suspend fun searchByKeyword(keyword: String, limit: Int): List<PoiResult>
    suspend fun searchNearby(center: LatLng, radiusMeters: Double): List<PoiResult>
    suspend fun searchByCategory(category: String): List<PoiResult>
}
```

### 3. UI å±‚ (`ui/`)

| ç›®å½• | èŒè´£ |
|------|------|
| `screen/{æ¨¡å—}/` | é¡µé¢æ¨¡å—ï¼ˆScreen + ViewModel + UiState + componentsï¼‰ |
| `components/` | å…¨å±€å¯å¤ç”¨çš„ Composable ç»„ä»¶ |
| `navigation/` | å¯¼èˆªå›¾å®šä¹‰ |
| `theme/` | ä¸»é¢˜é…ç½® |

**MVVM æ•°æ®æµ**ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     StateFlow      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     Repository      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Screen    â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  ViewModel  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚    Data     â”‚
â”‚  (Compose)  â”‚                    â”‚             â”‚                     â”‚    Layer    â”‚
â”‚             â”‚â”€â”€â”€â”€â”€â”€â”€ Event â”€â”€â”€â”€â”€â–ºâ”‚             â”‚                     â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**MapView å‘½ä»¤å¼æ“ä½œ**ï¼ˆé€šè¿‡ Channelï¼‰ï¼š

```kotlin
// ViewModel å‘é€å‘½ä»¤
_mapCommands.send(MapCommand.MoveTo(latLong, zoom))

// Screen ä¸­æ¥æ”¶å¹¶æ‰§è¡Œ
LaunchedEffect(mapView) {
    viewModel.mapCommands.collect { command ->
        when (command) {
            is MapCommand.MoveTo -> mapView.setCenter(command.latLong)
            // ...
        }
    }
}
```

### 4. é€šç”¨æ¨¡å— (`common/`)

| ç›®å½• | èŒè´£ |
|------|------|
| `utils/` | å·¥å…·ç±»ï¼ˆGeoUtilsã€FormatUtilsï¼‰ |
| `constants/` | å¸¸é‡å®šä¹‰ï¼ˆMapConstantsï¼‰ |
| `extension/` | Kotlin æ‰©å±•å‡½æ•° |

### 5. ä¾èµ–æ³¨å…¥ (`di/`)

| æ–‡ä»¶ | èŒè´£ |
|------|------|
| `AmapSimApplication.kt` | Application å…¥å£ |
| `AppModule.kt` | ä¾èµ–æä¾›ï¼ˆæ‰‹åŠ¨ DI æˆ– Hilt Moduleï¼‰|

---

## å…³é”®æ•°æ®æ¨¡å‹

```kotlin
// ç»çº¬åº¦
data class LatLng(val lat: Double, val lon: Double)

// è·¯çº¿ç»“æœ
data class RouteResult(
    val distance: Double,           // ç±³
    val time: Long,                 // æ¯«ç§’
    val points: List<LatLng>,       // è·¯çº¿ç‚¹
    val instructions: List<RouteInstruction>
)

// POI ç»“æœ
data class PoiResult(
    val id: Long,
    val name: String,
    val category: String,
    val lat: Double,
    val lon: Double,
    val address: String?
)

// åœ°å›¾ UI çŠ¶æ€
data class MapUiState(
    val center: LatLong,
    val zoomLevel: Byte,
    val markers: List<MarkerData>,
    val routeResult: RouteResult?,
    val isLoading: Boolean,
    val error: String?
)
```

---

## è¿ç§»è®¡åˆ’

### é˜¶æ®µä¸€ï¼šåŸºç¡€è®¾æ–½ï¼ˆ1-2å¤©ï¼‰

- [ ] æ›´æ–° `build.gradle.kts` æ·»åŠ æ‰€æœ‰ä¾èµ–
- [ ] æ›´æ–° `libs.versions.toml` é…ç½®
- [ ] åœ¨å¼€å‘æœºä¸Šå‡†å¤‡æ­¦æ±‰å¸‚ç¦»çº¿æ•°æ®æ–‡ä»¶
- [ ] å°†æ•°æ®æ–‡ä»¶æ”¾å…¥ `app/src/main/assets/map/` ç›®å½•

### é˜¶æ®µäºŒï¼šæ ¸å¿ƒæœåŠ¡ï¼ˆ2-3å¤©ï¼‰

- [ ] å®ç° `OfflineDataManager` æ•°æ®ç®¡ç†å™¨
- [ ] å®ç° `OfflineRoutingService` è·¯ç”±æœåŠ¡
- [ ] å®ç° `OfflineSearchService` æœç´¢æœåŠ¡
- [ ] åˆ›å»º `AmapSimApplication` åº”ç”¨ç±»

### é˜¶æ®µä¸‰ï¼šåœ°å›¾æ¸²æŸ“ï¼ˆ2-3å¤©ï¼‰

- [ ] å®ç° `MapsforgeMapView` Compose ç»„ä»¶
- [ ] å®ç°åœ°å›¾æ ‡è®°ç‚¹ï¼ˆMarkerï¼‰åŠŸèƒ½
- [ ] å®ç°è·¯çº¿ç»˜åˆ¶ï¼ˆPolylineï¼‰åŠŸèƒ½
- [ ] å®ç°åœ°å›¾äº¤äº’ï¼ˆç‚¹å‡»ã€é•¿æŒ‰ç­‰ï¼‰

### é˜¶æ®µå››ï¼šUI é¡µé¢ï¼ˆ2-3å¤©ï¼‰

- [ ] å®ç°å¯åŠ¨é¡µï¼ˆæ•°æ®åˆå§‹åŒ–ï¼‰
- [ ] å®ç°ä¸»é¡µï¼ˆåœ°å›¾ + æœç´¢æ¡†ï¼‰
- [ ] å®ç°æœç´¢é¡µ
- [ ] å®ç°è·¯çº¿è§„åˆ’é¡µ
- [ ] å®ç°å¯¼èˆªé¡µ

### é˜¶æ®µäº”ï¼šæµ‹è¯•ä¸ä¼˜åŒ–ï¼ˆ2-3å¤©ï¼‰

- [ ] åŠŸèƒ½æµ‹è¯•ï¼ˆçœŸæœº + æ¨¡æ‹Ÿå™¨ï¼‰
- [ ] æ€§èƒ½ä¼˜åŒ–ï¼ˆå†…å­˜ã€å¯åŠ¨é€Ÿåº¦ï¼‰
- [ ] UI ç¾åŒ–
- [ ] æ–‡æ¡£æ›´æ–°

**é¢„è®¡æ€»å·¥æ—¶ï¼š9-14å¤©**

---

## ä¸ç°æœ‰æ¶æ„çš„å¯¹æ¥

### ä¿æŒä¸å˜çš„éƒ¨åˆ†

```
âœ… Jetpack Compose UI æ¡†æ¶
âœ… MVVM æ¶æ„æ¨¡å¼ï¼ˆViewModel + StateFlowï¼‰
âœ… Kotlin åç¨‹
âœ… Navigation å¯¼èˆª
```

### éœ€è¦æ–°å¢çš„éƒ¨åˆ†

**æ•°æ®å±‚ (data/)**
```
â• data/local/OfflineDataManager.kt      # æ•°æ®è§£å‹ç®¡ç†
â• data/local/GraphHopperManager.kt      # è·¯ç”±å¼•æ“å°è£…
â• data/local/MapsforgePoiManager.kt     # POI æœç´¢å°è£…
â• data/mapper/RouteMapper.kt            # è·¯çº¿æ•°æ®è½¬æ¢
â• data/mapper/PoiMapper.kt              # POI æ•°æ®è½¬æ¢
â• data/repository/*Impl.kt              # Repository å®ç°
```

**é¢†åŸŸå±‚ (domain/)**
```
â• domain/model/*.kt                     # é¢†åŸŸæ¨¡å‹
â• domain/repository/*Repository.kt      # Repository æ¥å£
```

**UI å±‚ (ui/)**
```
â• ui/screen/map/*                       # åœ°å›¾é¡µé¢æ¨¡å—
â• ui/screen/search/*                    # æœç´¢é¡µé¢æ¨¡å—
â• ui/screen/navigation/*                # å¯¼èˆªé¡µé¢æ¨¡å—
â• ui/components/*.kt                    # é€šç”¨ç»„ä»¶
â• ui/navigation/NavGraph.kt             # å¯¼èˆªå›¾
```

**å…¶ä»–**
```
â• common/utils/*.kt                     # å·¥å…·ç±»
â• di/AmapSimApplication.kt              # Application
â• di/AppModule.kt                       # ä¾èµ–æ³¨å…¥æ¨¡å—
â• assets/map/                           # ç¦»çº¿æ•°æ®æ–‡ä»¶
```

---

## æ³¨æ„äº‹é¡¹

### 1. æ•°æ®æ–‡ä»¶ä½“ç§¯

ç¦»çº¿æ•°æ®æ–‡ä»¶çº¦ 100-160MBï¼Œä¼šæ˜¾è‘—å¢åŠ  APK ä½“ç§¯ã€‚å»ºè®®ï¼š
- ä½¿ç”¨ App Bundle åˆ†å‘
- æˆ–é¦–æ¬¡å¯åŠ¨æ—¶ä»æœåŠ¡å™¨ä¸‹è½½æ•°æ®

### 2. å†…å­˜ç®¡ç†

GraphHopper åŠ è½½å¤§å‹å›¾æ—¶å¯èƒ½å ç”¨è¾ƒå¤šå†…å­˜ï¼š
- å»ºè®® `minSdk >= 24`
- åœ¨ `Application.onTrimMemory()` ä¸­å¤„ç†å†…å­˜è­¦å‘Š

### 3. é¦–æ¬¡å¯åŠ¨

é¦–æ¬¡å¯åŠ¨éœ€è¦è§£å‹æ•°æ®æ–‡ä»¶ï¼Œå¯èƒ½éœ€è¦ 10-30 ç§’ï¼š
- æ˜¾ç¤ºè¿›åº¦æ¡æç¤ºç”¨æˆ·
- è€ƒè™‘åå°é¢„åŠ è½½

### 4. ProGuard é…ç½®

å¦‚æœå¯ç”¨ä»£ç æ··æ·†ï¼Œéœ€è¦æ·»åŠ è§„åˆ™ï¼š

```proguard
# app/proguard-rules.pro

# Mapsforge
-keep class org.mapsforge.** { *; }
-dontwarn org.mapsforge.**

# GraphHopper
-keep class com.graphhopper.** { *; }
-dontwarn com.graphhopper.**

# SLF4J
-dontwarn org.slf4j.**
```

---

## ä¼˜åŠ¿æ€»ç»“

### æŠ€æœ¯ä¼˜åŠ¿

1. **100% çº¯ç¦»çº¿**ï¼šæ— éœ€ä»»ä½•ç½‘ç»œè¿æ¥
2. **å…¨æ¶æ„æ”¯æŒ**ï¼šARMã€x86ã€æ¨¡æ‹Ÿå™¨å…¨å…¼å®¹
3. **ä½“ç§¯å°**ï¼šæ•°æ®+ä»£ç çº¦ 100-160MB
4. **å¯æµ‹è¯•**ï¼šæ”¯æŒ CI/CD è‡ªåŠ¨åŒ–æµ‹è¯•
5. **å¯å®šåˆ¶**ï¼šåœ°å›¾æ ·å¼ã€æ•°æ®å†…å®¹å®Œå…¨å¯æ§
6. **å¼€æºç”Ÿæ€**ï¼šOpenStreetMap æ•°æ®æŒç»­æ›´æ–°

---

## å‚è€ƒèµ„æº

### å®˜æ–¹æ–‡æ¡£

- [Mapsforge GitHub](https://github.com/mapsforge/mapsforge)
- [Mapsforge Android å…¥é—¨](https://github.com/mapsforge/mapsforge/blob/master/docs/Getting-Started-Android-App.md)
- [GraphHopper æ–‡æ¡£](https://www.graphhopper.com/documentation/)
- [GraphHopper Android Demo](https://github.com/graphhopper/graphhopper/tree/master/android)
- [OpenStreetMap](https://www.openstreetmap.org/)

### æ•°æ®ä¸‹è½½

- [Geofabrik ä¸­å›½æ•°æ®](https://download.geofabrik.de/asia/china.html)
- [é¢„åˆ¶ Mapsforge åœ°å›¾](https://download.mapsforge.org/)

### å·¥å…·

- [osmium-tool](https://osmcode.org/osmium-tool/) - OSM æ•°æ®å¤„ç†
- [osmosis](https://github.com/openstreetmap/osmosis) - OSM æ•°æ®è½¬æ¢
- [GraphHopper Docker](https://hub.docker.com/r/graphhopper/graphhopper)

---

**æ–‡æ¡£ç‰ˆæœ¬**ï¼š2.0  
**åˆ›å»ºæ—¥æœŸ**ï¼š2024å¹´12æœˆ  
**æœ€åæ›´æ–°**ï¼š2024å¹´12æœˆ  
**æ›´æ–°å†…å®¹**ï¼šä¿®å¤ GraphHopper APIã€å®Œå–„ä»£ç ç¤ºä¾‹ã€æ·»åŠ æ•°æ®ç®¡ç†å™¨ã€è¡¥å…… POI æå–è„šæœ¬
